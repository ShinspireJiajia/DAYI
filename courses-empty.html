<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>課程 - 智生活</title>
  <link rel="stylesheet" href="styles.css" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
  <style>
    .action-button { 
      background: linear-gradient(135deg, #60a5fa, #3b82f6);
      border: none;
      border-radius: 16px; 
      padding: 20px 28px; /* Increased padding */
      display: flex; 
      align-items: center; 
      justify-content: center;
      gap: 12px;
      color: #fff;
      font-size: 18px; /* Increased font size */
      font-weight: 700;
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3);
      transition: all 0.2s ease;
      margin-bottom: 20px;
      text-decoration: none;
      position: relative;
      overflow: hidden;
    }
    .action-button:hover { 
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(59, 130, 246, 0.4);
    }
    /* Pulse animation for the button to attract attention */
    /* .action-button.highlight {
      animation: pulse-blue 2s infinite;
    } */
    @keyframes pulse-blue {
      0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7); }
      70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
      100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
    }

    .action-button i { font-size: 22px; } /* Increased icon size */
    
    .section-title {
      font-size: 18px;
      font-weight: 700;
      color: #111827;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .section-title i { color: #6b7280; font-size: 16px; }
    
    .tabs { 
      display: flex; 
      gap: 10px; 
      padding: 0 0 12px;
      margin-bottom: 12px;
    }
    .tab { 
      flex: 1; 
      text-align: center; 
      padding: 10px 14px; 
      border-radius: 12px; 
      background: #f7fafc; 
      color: #4b5563; 
      font-weight: 700; 
      border: 1.5px solid #e5e7eb; 
      transition: all 0.18s ease;
      cursor: pointer;
    }
    .tab.active { 
      background: linear-gradient(135deg, #6aa5ff, #63d1ff); 
      color: #fff; 
      border-color: #4f8ef7; 
      box-shadow: 0 4px 12px rgba(79, 142, 247, 0.28);
    }
    
    .course-list { display: grid; gap: 0; padding-bottom: 80px; } /* Gap 0 for zebra striping */
    .course-card { 
      background: #fff; 
      border-radius: 14px; 
      box-shadow: 0 4px 12px rgba(37, 53, 76, 0.08); 
      padding: 18px; /* Increased padding */
      display: flex; 
      gap: 16px; 
      align-items: flex-start; 
      border: 1px solid #e5e7eb;
      margin-bottom: 10px; /* Add margin for gap */
    }
    /* Zebra Striping */
    .course-card:nth-child(odd) { background-color: #FFFFFF; }
    .course-card:nth-child(even) { background-color: #f4f8f9; }

    .course-icon { 
      width: 44px; 
      height: 44px; 
      border-radius: 12px; 
      display: grid; 
      place-items: center; 
      color: #fff; 
      background: linear-gradient(135deg, #6aa5ff, #63d1ff);
      font-size: 18px;
      flex-shrink: 0;
    }
    .course-body { 
      flex: 1;
      display: flex; 
      flex-direction: column;
      gap: 6px; 
      min-width: 0;
    }
    .course-header-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 8px;
    }
    .course-title { font-weight: 800; color: #111827; font-size: 20px; line-height: 1.2; flex: 1; } /* Larger and bolder */
    
    .course-tag {
      display: inline-block;
      font-size: 13px;
      color: #92400e;
      background-color: #fef3c7;
      padding: 2px 8px;
      border-radius: 6px;
      align-self: flex-start;
      font-weight: 500;
    }

    .course-time {
      font-size: 16px;
      font-weight: 700;
      color: #2563eb; /* Primary Blue */
      display: flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
    }
    .course-location {
      font-size: 14px;
      color: #4b5563;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .course-sub { font-size: 13px; color: #607d8b; } /* Keep for backward compatibility */
    .course-actions { display: flex; flex-direction: column; gap: 6px; align-items: flex-end; }
    .badge { 
      font-size: 11px; 
      padding: 4px 8px; 
      border-radius: 999px; 
      font-weight: 700;
      white-space: nowrap;
      flex-shrink: 0;
    }
    .badge.booked { background: #e8f5e8; color: #2e7d32; }
    .badge.waitlist { background: #fff3e0; color: #f57c00; }
    .badge.checked-in { background: #e0f2fe; color: #0369a1; }
    
    /* Enhanced Empty State */
    .empty-state-container {
      text-align: center;
      padding: 60px 20px;
      background: #fff;
      border-radius: 16px;
      border: 2px dashed #e5e7eb;
      margin-top: 10px;
    }
    .empty-icon-wrapper {
      width: 80px;
      height: 80px;
      background: #f3f4f6;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
    }
    .empty-icon-wrapper i {
      font-size: 36px;
      color: #9ca3af;
    }
    .empty-title {
      font-size: 18px;
      font-weight: 700;
      color: #374151;
      margin-bottom: 8px;
    }
    .empty-desc {
      font-size: 14px;
      color: #6b7280;
      margin-bottom: 24px;
      line-height: 1.5;
    }
    .empty-arrow {
      color: #3b82f6;
      font-size: 24px;
      animation: bounce-up 1.5s infinite;
      margin-bottom: 10px;
      display: none; /* Hide arrow as we are using button now */
    }
    .empty-cta-btn {
      display: inline-block;
      background: #3b82f6;
      color: #fff;
      padding: 12px 24px;
      border-radius: 12px;
      font-weight: 700;
      text-decoration: none;
      margin-top: 16px;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
      transition: transform 0.2s;
    }
    .empty-cta-btn:hover {
      transform: translateY(-2px);
      background: #2563eb;
    }
    
    /* Modal styles */
    .modal { 
      display: none; 
      position: fixed; 
      top: 0; 
      left: 0; 
      width: 100%; 
      height: 100%; 
      background: rgba(0,0,0,0.5); 
      z-index: 9999;
      animation: fadeIn 0.2s ease;
      padding: 100px 0 80px 0;
    }
    .modal.show { display: flex; align-items: flex-end; justify-content: center; }
    .modal-content { 
      background: #fff; 
      width: calc(100% - 32px);
      max-width: 382px;
      border-radius: 20px; 
      padding: 24px; 
      max-height: 100%; 
      overflow-y: auto;
      animation: slideUp 0.3s ease;
    }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
    
    .modal-header { 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      margin-bottom: 20px;
      padding-bottom: 12px;
      border-bottom: 2px solid #e5e7eb;
    }
    .modal-title { font-size: 20px; font-weight: 700; color: #111827; }
    .modal-close { 
      background: #f3f4f6; 
      border: none; 
      width: 32px; 
      height: 32px; 
      border-radius: 50%; 
      cursor: pointer;
      display: grid;
      place-items: center;
      color: #6b7280;
      font-size: 18px;
      transition: all 0.2s;
    }
    .modal-close:hover { background: #e5e7eb; }
    
    .detail-row { 
      display: grid; 
      grid-template-columns: 100px 1fr; 
      gap: 12px; 
      padding: 12px 0;
      border-bottom: 1px solid #f3f4f6;
    }
    .detail-row:last-child { border-bottom: none; }
    .detail-label { 
      font-weight: 700; 
      color: #6b7280; 
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .detail-value { 
      color: #111827; 
      font-size: 15px;
      display: flex;
      align-items: center;
    }
    .status-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 700;
    }
    .status-badge.booked { background: #e8f5e8; color: #2e7d32; }
    .status-badge.waitlist { background: #fff3e0; color: #f57c00; }
    .status-badge.checked-in { background: #e0f2fe; color: #0369a1; }
  </style>
</head>
<body>
  <!-- Status Bar -->
  <div class="status-bar">
    <span class="time">15:10</span>
    <div class="signal-battery">
      <span class="signal">
        <i class="fas fa-signal"></i>
        <span class="network">5G</span>
      </span>
      <i class="fas fa-battery-three-quarters"></i>
    </div>
  </div>

  <!-- App Header -->
  <header class="app-header">
    <div class="header-left">
      <div class="app-logo">
        <a href="index.html" aria-label="返回首頁" class="back-link"><i class="fas fa-chevron-left"></i></a>
        <span class="app-name">課程</span>
      </div>
    </div>
    <div class="header-right">
      <a href="member-code.html" aria-label="會員條碼" class="header-action"><i class="fas fa-qrcode"></i></a>
      <i class="fas fa-comment-dots"></i>
      <a href="notifications.html" aria-label="通知"><i class="fas fa-bell"></i></a>
    </div>
  </header>

  <main class="main-content">
    <!-- 課程預約按鈕 -->
    <a href="course-booking.html" class="action-button highlight" id="bookingBtn">
      <i class="fas fa-calendar-plus"></i>
      <span>課程預約</span>
    </a>

    <!-- 我的課程區塊 -->
    <div class="section-title">
      <i class="fas fa-list-check"></i>
      我的課程
    </div>

    <div class="tabs">
      <button class="tab active" data-tab="upcoming">即將到來</button>
      <button class="tab" data-tab="history">歷史紀錄</button>
    </div>

    <div id="list-upcoming" class="course-list"></div>
    <div id="list-history" class="course-list" style="display:none;"></div>
  </main>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <a class="nav-item" href="index.html">
      <i class="fas fa-home"></i>
      <span>首頁</span>
    </a>
    <a class="nav-item" href="space-booking.html">
      <i class="fas fa-concierge-bell"></i>
      <span>我要預約</span>
    </a>
    <div class="nav-item">
      <i class="fas fa-wallet"></i>
      <span>錢包</span>
    </div>
    <a class="nav-item" href="personal.html">
      <i class="fas fa-user"></i>
      <span>個人</span>
    </a>
  </nav>
  <div class="home-indicator"></div>

  <!-- Course Detail Modal -->
  <div id="courseModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">課程詳情</div>
        <button class="modal-close" onclick="closeModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div id="modalBody"></div>
    </div>
  </div>

  <script>
    // Use a different key or just don't load from local storage to ensure empty state
    // For this demo file, we will force empty state
    
    function load() {
      return []; // Always return empty array for this demo
    }
    
    function render() {
      const data = load();
      const now = Date.now();
      const upcoming = [];
      const history = [];
      
      // Since data is empty, these will be empty
      data.forEach(item => {
        const t = new Date(item.datetime).getTime();
        if (!isNaN(t) && t >= now) {
          upcoming.push(item);
        } else {
          history.push(item);
        }
      });
      
      drawList('upcoming', upcoming);
      drawList('history', history);
    }

    function drawList(type, list) {
      const container = document.getElementById(`list-${type}`);
      container.innerHTML = '';
      
      if (list.length === 0) {
        if (type === 'upcoming') {
            container.innerHTML = `
                <div class="empty-state-container">
                    <div class="empty-icon-wrapper">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="empty-title">目前沒有預約課程</div>
                    <div class="empty-desc">
                        您還沒有預約任何即將到來的課程。<br>
                        立即探索豐富課程，開始您的學習之旅！
                    </div>
                    <a href="course-booking.html" class="empty-cta-btn">
                        探索課程
                    </a>
                </div>
            `;
        } else {
            container.innerHTML = `
                <div class="empty-state-container">
                    <div class="empty-icon-wrapper">
                        <i class="fas fa-history"></i>
                    </div>
                    <div class="empty-title">沒有歷史紀錄</div>
                    <div class="empty-desc">
                        您目前沒有已結束的課程紀錄。
                    </div>
                </div>
            `;
        }
        return;
      }
      
      // ... existing rendering code (kept for completeness if logic changes) ...
      list.forEach(item => {
        const card = document.createElement('div');
        card.className = 'course-card';
        // ... (rest of card creation logic)
        container.appendChild(card);
      });
    }

    function closeModal() {
      const modal = document.getElementById('courseModal');
      modal.classList.remove('show');
    }

    // Close modal when clicking outside
    document.getElementById('courseModal').addEventListener('click', (e) => {
      if (e.target.id === 'courseModal') {
        closeModal();
      }
    });

    // Tab switching
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        const targetTab = tab.dataset.tab;
        
        // Update active tab
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        
        // Show/hide lists
        document.getElementById('list-upcoming').style.display = targetTab === 'upcoming' ? 'grid' : 'none';
        document.getElementById('list-history').style.display = targetTab === 'history' ? 'grid' : 'none';
      });
    });

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      render();
    });
  </script>
</body>
</html>
