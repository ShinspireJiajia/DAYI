<!DOCTYPE html>
<html lang="zh-TW">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>我要預約 - 智生活</title>
	<link rel="stylesheet" href="styles.css" />
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
	<style>
		/* Page-scoped styles aligned with site cards */
		.filter-card { background:#fff; border:1px solid #e5e7eb; border-radius:16px; padding:12px; box-shadow:0 2px 8px rgba(0,0,0,0.06); margin-bottom:16px; }
		.filter-grid { display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
		.filter-field { display:flex; flex-direction:column; gap:6px; }
		.filter-field label { font-size:13px; color:#374151; font-weight:600; }
		.filter-field select, .filter-field input[type=date], .filter-field input[type=time] { border:1px solid #e5e7eb; border-radius:10px; padding:10px; font-size:14px; background:#fff; color:#111827; }
		.filter-actions { display:flex; gap:10px; margin-top:8px; }
		.btn { border:none; border-radius:10px; padding:10px 12px; font-size:14px; cursor:pointer; }
		.btn-primary { background:#111827; color:#fff; }
		.btn-ghost { background:#f3f4f6; color:#374151; }

		.equip-list { display:grid; gap:12px; }
		.equip-card { background:#fff; border:1px solid #e5e7eb; border-radius:16px; padding:12px; box-shadow:0 2px 8px rgba(0,0,0,0.06); display:flex; align-items:center; justify-content:space-between; }
		.equip-left { display:flex; align-items:center; gap:12px; }
		.equip-icon { width:44px; height:44px; border-radius:12px; background:#f3f4f6; display:flex; align-items:center; justify-content:center; color:#6b7280; font-size:18px; }
		.equip-text { display:flex; flex-direction:column; }
		.equip-name { font-weight:800; color:#111827; font-size:15px; }
		.equip-meta { font-size:12px; color:#6b7280; }
		.equip-right { display:flex; align-items:center; gap:10px; }
		.tag { font-size:12px; color:#047857; background:#ecfdf5; border:1px solid #d1fae5; padding:4px 8px; border-radius:999px; }
		.btn-book { background:#111827; color:#fff; border:none; padding:8px 12px; border-radius:10px; font-size:14px; cursor:pointer; }

		/* Modal */
		.modal { position:fixed; inset:0; display:none; align-items:flex-end; justify-content:center; background:rgba(0,0,0,0.35); z-index:50; }
		.sheet { width:100%; max-width:414px; background:#fff; border-top-left-radius:16px; border-top-right-radius:16px; padding:16px; box-shadow:0 -6px 24px rgba(0,0,0,0.12); }
		.sheet-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; }
		.sheet-title { font-size:16px; font-weight:800; color:#111827; }
		.close-btn { background:transparent; border:none; font-size:20px; color:#6b7280; }
		.sheet-row { display:grid; grid-template-columns: 100px 1fr; gap:8px; padding:8px 0; border-bottom:1px solid #f3f4f6; }
		.sheet-row .label { color:#6b7280; font-size:13px; }
		.sheet-row .value { color:#111827; font-weight:600; font-size:14px; }
		.sheet-actions { display:flex; gap:10px; margin-top:12px; }
	</style>
	<script>
		document.addEventListener('DOMContentLoaded', () => {
			// Rebook notice
			const usp = new URLSearchParams(location.search);
			if (usp.get('from') === 'rebook') {
				const note = document.createElement('div');
				note.style.cssText = 'margin:0 0 12px 0;padding:10px 12px;border-radius:12px;background:#eef6ff;color:#0d47a1;font-weight:600;';
				note.innerHTML = `<i class="fas fa-rotate"></i> 由個人預約記錄再次預約`;
				document.querySelector('.main-content .filter-card')?.insertAdjacentElement('beforebegin', note);
			}
			// Default date/time
			const d = document.getElementById('date');
			const tStart = document.getElementById('timeStart');
			const tEnd = document.getElementById('timeEnd');
			if (d) d.value = new Date().toISOString().split('T')[0];
			if (tStart) tStart.value = '09:00';
			if (tEnd) tEnd.value = '10:00';

			// Booking buttons
			document.querySelectorAll('.btn-book').forEach(btn => {
				btn.addEventListener('click', () => openSheet(btn.dataset.equip));
			});

			document.getElementById('closeSheet')?.addEventListener('click', closeSheet);
			document.getElementById('confirmBooking')?.addEventListener('click', () => {
				alert('預約成功，已寄送通知。');
				closeSheet();
			});
			document.getElementById('modal').addEventListener('click', (e) => {
				if (e.target.id === 'modal') closeSheet();
			});
		});

		function openSheet(equipName) {
			const site = document.getElementById('site').value;
			const date = document.getElementById('date').value;
			const start = document.getElementById('timeStart').value;
			const end = document.getElementById('timeEnd').value;
			document.getElementById('s-equip').textContent = equipName;
			document.getElementById('s-site').textContent = site;
			document.getElementById('s-date').textContent = date;
			document.getElementById('s-time').textContent = `${start} - ${end}`;
			document.getElementById('modal').style.display = 'flex';
		}
		function closeSheet(){ document.getElementById('modal').style.display = 'none'; }
	</script>
</head>
<body>
	<!-- Status Bar -->
	<div class="status-bar">
		<span class="time">15:10</span>
		<div class="signal-battery">
			<span class="signal">
				<i class="fas fa-signal"></i>
				<span class="network">5G</span>
			</span>
			<i class="fas fa-battery-three-quarters"></i>
		</div>
	</div>

	<!-- App Header -->
	<header class="app-header">
		<div class="header-left">
			<div class="app-logo">
				<a href="personal.html" aria-label="返回個人" class="back-link"><i class="fas fa-chevron-left"></i></a>
			<span class="app-name">我要預約</span>
			</div>
		</div>
		<div class="header-right">
			<a href="member-code.html" aria-label="會員條碼" class="header-action"><i class="fas fa-qrcode"></i></a>
			<i class="fas fa-comment-dots"></i>
			<i class="fas fa-bell"></i>
		</div>
	</header>

	<main class="main-content">
		<!-- Filters -->
		<div class="filter-card">
			<div class="filter-grid">
				<div class="filter-field">
					<label for="site">場館</label>
					<select id="site">
						<option>A棟 健身中心</option>
						<option>B棟 社區活動館</option>
						<option>C棟 生活館</option>
					</select>
				</div>
				<div class="filter-field">
					<label for="date">日期</label>
					<input type="date" id="date" />
				</div>
				<div class="filter-field">
					<label for="timeStart">開始時間</label>
					<input type="time" id="timeStart" />
				</div>
				<div class="filter-field">
					<label for="timeEnd">結束時間</label>
					<input type="time" id="timeEnd" />
				</div>
			</div>
			<div class="filter-actions">
				<button class="btn btn-ghost" onclick="window.scrollTo({top:0,behavior:'smooth'})"><i class="fas fa-rotate"></i> 重設</button>
				<button class="btn btn-primary"><i class="fas fa-search"></i> 查詢可用</button>
			</div>
		</div>

		<!-- Equipment List -->
		<div class="equip-list">
			<div class="equip-card">
				<div class="equip-left">
					<div class="equip-icon"><i class="fas fa-dumbbell"></i></div>
					<div class="equip-text">
						<div class="equip-name">跑步機 Treadmill 01</div>
						<div class="equip-meta">A棟 健身中心 ・ 2F</div>
					</div>
				</div>
				<div class="equip-right">
					<span class="tag">可預約</span>
					<button class="btn-book" data-equip="跑步機 Treadmill 01">預約</button>
				</div>
			</div>

			<div class="equip-card">
				<div class="equip-left">
					<div class="equip-icon"><i class="fas fa-bicycle"></i></div>
					<div class="equip-text">
						<div class="equip-name">飛輪車 Bike 03</div>
						<div class="equip-meta">A棟 健身中心 ・ 2F</div>
					</div>
				</div>
				<div class="equip-right">
					<span class="tag">可預約</span>
					<button class="btn-book" data-equip="飛輪車 Bike 03">預約</button>
				</div>
			</div>

			<div class="equip-card">
				<div class="equip-left">
					<div class="equip-icon"><i class="fas fa-person-walking"></i></div>
					<div class="equip-text">
						<div class="equip-name">瑜珈室 Yoga Room</div>
						<div class="equip-meta">B棟 社區活動館 ・ B1</div>
					</div>
				</div>
				<div class="equip-right">
					<span class="tag">可預約</span>
					<button class="btn-book" data-equip="瑜珈室 Yoga Room">預約</button>
				</div>
			</div>
		</div>
	</main>

	<!-- Bottom Navigation -->
	<nav class="bottom-nav">
		<a class="nav-item" href="index.html">
			<i class="fas fa-home"></i>
			<span>首頁</span>
		</a>
			<a class="nav-item active" href="space-booking.html">
				<i class="fas fa-concierge-bell"></i>
				<span>我要預約</span>
			</a>
		<div class="nav-item">
			<i class="fas fa-wallet"></i>
			<span>錢包</span>
		</div>
		<a class="nav-item" href="personal.html">
			<i class="fas fa-user"></i>
			<span>個人</span>
		</a>
	</nav>
	<div class="home-indicator"></div>

	<!-- Booking Modal Sheet -->
	<div class="modal" id="modal">
		<div class="sheet">
			<div class="sheet-header">
				<div class="sheet-title">確認預約</div>
				<button class="close-btn" id="closeSheet">×</button>
			</div>
			<div class="sheet-row"><div class="label">設備</div><div class="value" id="s-equip">—</div></div>
			<div class="sheet-row"><div class="label">場館</div><div class="value" id="s-site">—</div></div>
			<div class="sheet-row"><div class="label">日期</div><div class="value" id="s-date">—</div></div>
			<div class="sheet-row"><div class="label">時段</div><div class="value" id="s-time">—</div></div>
			<div class="sheet-actions">
				<button class="btn btn-ghost" onclick="document.getElementById('modal').style.display='none'">取消</button>
				<button class="btn btn-primary" id="confirmBooking">確認預約</button>
			</div>
		</div>
	</div>
</body>
</html>
